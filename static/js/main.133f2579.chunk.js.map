{"version":3,"sources":["Camera/index.js","App.tsx","serviceWorker.js","index.tsx"],"names":["__makeTemplateObject","cooked","raw","Object","defineProperty","value","templateObject_1","templateObject_2","templateObject_3","templateObject_4","templateObject_5","Wrapper","styled","div","Container","_a","aspectRatio","ErrorMsg","Cam","video","mirrored","Canvas","canvas","Camera","React","forwardRef","ref","_b","facingMode","_c","_d","numberOfCamerasCallback","_e","videoSourceDeviceId","undefined","_f","errorMessages","noCameraAccessible","permissionDenied","switchCamera","player","useRef","container","_g","useState","numberOfCameras","setNumberOfCameras","_h","stream","setStream","_j","currentFacingMode","setFacingMode","_k","notSupported","setNotSupported","_l","setPermissionDenied","useEffect","useImperativeHandle","takePhoto","Error","current","playerWidth","videoWidth","playerHeight","videoHeight","playerAR","canvasAR","offsetWidth","offsetHeight","sX","sY","sW","sH","width","height","context","getContext","drawImage","toDataURL","console","error","newFacingMode","getNumberOfCameras","initCameraStream","srcObject","getTracks","forEach","track","stop","createElement","id","muted","autoPlay","playsInline","displayName","constraints","audio","deviceId","exact","ideal","navigator","mediaDevices","getUserMedia","then","handleSuccess","catch","err","handleError","getWebcam","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","enumerateDevices","r","filter","i","kind","length","name","Control","Button","button","TakePhotoButton","ChangeFacingCameraButton","ImagePreview","image","FullScreenImagePreview","App","setImage","showImage","setShowImage","camera","devices","setDevices","activeDeviceId","setActiveDeviceId","a","videoDevices","onClick","onChange","event","target","map","d","key","label","photo","log","disabled","result","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.133f2579.chunk.js","sourcesContent":["/* eslint-disable */\nimport React, { useRef, useState, useEffect, useImperativeHandle } from 'react';\nimport styled from 'styled-components';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n}\n\nvar Wrapper = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n\"], [\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n\"])));\r\nvar Container = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  width: 100%;\\n  \", \"\\n\"], [\"\\n  width: 100%;\\n  \",\r\n    \"\\n\"])), function (_a) {\r\n    var aspectRatio = _a.aspectRatio;\r\n    return aspectRatio === 'cover'\r\n        ? \"\\n    position: absolute;\\n    bottom: 0;\\n    top: 0;\\n    left: 0;\\n    right: 0;\"\r\n        : \"\\n    position: relative;\\n    padding-bottom: \" + 100 / aspectRatio + \"%;\";\r\n});\r\nvar ErrorMsg = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  padding: 40px;\\n\"], [\"\\n  padding: 40px;\\n\"])));\r\nvar Cam = styled.video(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n  z-index: 0;\\n  transform: rotateY(\", \");\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n  z-index: 0;\\n  transform: rotateY(\", \");\\n\"])), function (_a) {\r\n    var mirrored = _a.mirrored;\r\n    return (mirrored ? '180deg' : '0deg');\r\n});\r\nvar Canvas = styled.canvas(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  display: none;\\n\"], [\"\\n  display: none;\\n\"])));\r\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;\r\n//# sourceMappingURL=styles.js.map\n\nvar Camera = React.forwardRef(function (_a, ref) {\r\n    var _b = _a.facingMode, facingMode = _b === void 0 ? 'user' : _b, _c = _a.aspectRatio, aspectRatio = _c === void 0 ? 'cover' : _c, _d = _a.numberOfCamerasCallback, numberOfCamerasCallback = _d === void 0 ? function () { return null; } : _d, _e = _a.videoSourceDeviceId, videoSourceDeviceId = _e === void 0 ? undefined : _e, _f = _a.errorMessages, errorMessages = _f === void 0 ? {\r\n        noCameraAccessible: 'No camera device accessible. Please connect your camera or try a different browser.',\r\n        permissionDenied: 'Permission denied. Please refresh and give camera permission.',\r\n        switchCamera: 'It is not possible to switch camera to different one because there is only one video device accessible.',\r\n        canvas: 'Canvas is not supported.',\r\n    } : _f;\r\n    var player = useRef(null);\r\n    var canvas = useRef(null);\r\n    var container = useRef(null);\r\n    var _g = useState(0), numberOfCameras = _g[0], setNumberOfCameras = _g[1];\r\n    var _h = useState(null), stream = _h[0], setStream = _h[1];\r\n    var _j = useState(facingMode), currentFacingMode = _j[0], setFacingMode = _j[1];\r\n    var _k = useState(false), notSupported = _k[0], setNotSupported = _k[1];\r\n    var _l = useState(false), permissionDenied = _l[0], setPermissionDenied = _l[1];\r\n    useEffect(function () {\r\n        numberOfCamerasCallback(numberOfCameras);\r\n    }, [numberOfCameras]);\r\n    useImperativeHandle(ref, function () { return ({\r\n        takePhoto: function () {\r\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n            if (numberOfCameras < 1) {\r\n                throw new Error(errorMessages.noCameraAccessible);\r\n            }\r\n            if ((_a = canvas) === null || _a === void 0 ? void 0 : _a.current) {\r\n                var playerWidth = ((_c = (_b = player) === null || _b === void 0 ? void 0 : _b.current) === null || _c === void 0 ? void 0 : _c.videoWidth) || 1280;\r\n                var playerHeight = ((_e = (_d = player) === null || _d === void 0 ? void 0 : _d.current) === null || _e === void 0 ? void 0 : _e.videoHeight) || 720;\r\n                var playerAR = playerWidth / playerHeight;\r\n                var canvasWidth = ((_g = (_f = container) === null || _f === void 0 ? void 0 : _f.current) === null || _g === void 0 ? void 0 : _g.offsetWidth) || 1280;\r\n                var canvasHeight = ((_j = (_h = container) === null || _h === void 0 ? void 0 : _h.current) === null || _j === void 0 ? void 0 : _j.offsetHeight) || 1280;\r\n                var canvasAR = canvasWidth / canvasHeight;\r\n                var sX = void 0, sY = void 0, sW = void 0, sH = void 0;\r\n                if (playerAR > canvasAR) {\r\n                    sH = playerHeight;\r\n                    sW = playerHeight * canvasAR;\r\n                    sX = (playerWidth - sW) / 2;\r\n                    sY = 0;\r\n                }\r\n                else {\r\n                    sW = playerWidth;\r\n                    sH = playerWidth / canvasAR;\r\n                    sX = 0;\r\n                    sY = (playerHeight - sH) / 2;\r\n                }\r\n                canvas.current.width = sW;\r\n                canvas.current.height = sH;\r\n                var context = canvas.current.getContext('2d');\r\n                if (context && ((_k = player) === null || _k === void 0 ? void 0 : _k.current)) {\r\n                    context.drawImage(player.current, sX, sY, sW, sH, 0, 0, sW, sH);\r\n                }\r\n                var imgData = canvas.current.toDataURL('image/jpeg');\r\n                return imgData;\r\n            }\r\n            else {\r\n                throw new Error(errorMessages.canvas);\r\n            }\r\n        },\r\n        switchCamera: function () {\r\n            if (numberOfCameras < 1) {\r\n                throw new Error(errorMessages.noCameraAccessible);\r\n            }\r\n            else if (numberOfCameras < 2) {\r\n                console.error('Error: Unable to switch camera. Only one device is accessible.'); // console only\r\n            }\r\n            var newFacingMode = currentFacingMode === 'user' ? 'environment' : 'user';\r\n            setFacingMode(newFacingMode);\r\n            return newFacingMode;\r\n        },\r\n        getNumberOfCameras: function () {\r\n            return numberOfCameras;\r\n        },\r\n    }); });\r\n    useEffect(function () {\r\n        initCameraStream(stream, setStream, currentFacingMode, videoSourceDeviceId, setNumberOfCameras, setNotSupported, setPermissionDenied);\r\n    }, [currentFacingMode, videoSourceDeviceId]);\r\n    useEffect(function () {\r\n        if (stream && player && player.current) {\r\n            player.current.srcObject = stream;\r\n        }\r\n        return function () {\r\n            if (stream) {\r\n                stream.getTracks().forEach(function (track) {\r\n                    track.stop();\r\n                });\r\n            }\r\n        };\r\n    }, [stream]);\r\n    return (React.createElement(Container, { ref: container, aspectRatio: aspectRatio },\r\n        React.createElement(Wrapper, null,\r\n            notSupported ? React.createElement(ErrorMsg, null, errorMessages.noCameraAccessible) : null,\r\n            permissionDenied ? React.createElement(ErrorMsg, null, errorMessages.permissionDenied) : null,\r\n            React.createElement(Cam, { ref: player, id: \"video\", muted: true, autoPlay: true, playsInline: true, mirrored: currentFacingMode === 'user' ? true : false }),\r\n            React.createElement(Canvas, { ref: canvas }))));\r\n});\r\nCamera.displayName = 'Camera';\r\nvar initCameraStream = function (stream, setStream, currentFacingMode, videoSourceDeviceId, setNumberOfCameras, setNotSupported, setPermissionDenied) {\r\n    var _a, _b;\r\n    // stop any active streams in the window\r\n    if (stream) {\r\n        stream.getTracks().forEach(function (track) {\r\n            track.stop();\r\n        });\r\n    }\r\n    var constraints = {\r\n        audio: false,\r\n        video: {\r\n            deviceId: videoSourceDeviceId ? { exact: videoSourceDeviceId } : undefined,\r\n            facingMode: currentFacingMode,\r\n            width: { ideal: 1920 },\r\n            height: { ideal: 1920 },\r\n        },\r\n    };\r\n    if ((_b = (_a = navigator) === null || _a === void 0 ? void 0 : _a.mediaDevices) === null || _b === void 0 ? void 0 : _b.getUserMedia) {\r\n        navigator.mediaDevices\r\n            .getUserMedia(constraints)\r\n            .then(function (stream) {\r\n            setStream(handleSuccess(stream, setNumberOfCameras));\r\n        })\r\n            .catch(function (err) {\r\n            handleError(err, setNotSupported, setPermissionDenied);\r\n        });\r\n    }\r\n    else {\r\n        var getWebcam = navigator.getUserMedia ||\r\n            navigator.webkitGetUserMedia ||\r\n            navigator.mozGetUserMedia ||\r\n            navigator.mozGetUserMedia ||\r\n            navigator.msGetUserMedia;\r\n        if (getWebcam) {\r\n            getWebcam(constraints, function (stream) {\r\n                setStream(handleSuccess(stream, setNumberOfCameras));\r\n            }, function (err) {\r\n                handleError(err, setNotSupported, setPermissionDenied);\r\n            });\r\n        }\r\n        else {\r\n            setNotSupported(true);\r\n        }\r\n    }\r\n};\r\nvar handleSuccess = function (stream, setNumberOfCameras) {\r\n    navigator.mediaDevices\r\n        .enumerateDevices()\r\n        .then(function (r) { return setNumberOfCameras(r.filter(function (i) { return i.kind === 'videoinput'; }).length); });\r\n    return stream;\r\n};\r\nvar handleError = function (error, setNotSupported, setPermissionDenied) {\r\n    console.error(error);\r\n    //https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\r\n    if (error.name === 'PermissionDeniedError') {\r\n        setPermissionDenied(true);\r\n    }\r\n    else {\r\n        setNotSupported(true);\r\n    }\r\n};\r\n//# sourceMappingURL=Camera.js.map\n\nexport { Camera };\n","import React, { useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\n\nimport { Camera, CameraType } from './Camera';\n\nconst Wrapper = styled.div`\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n`;\n\nconst Control = styled.div`\n  position: fixed;\n  display: flex;\n  right: 0;\n  width: 20%;\n  min-width: 130px;\n  min-height: 130px;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.8);\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 50px;\n  box-sizing: border-box;\n  flex-direction: column-reverse;\n\n  @media (max-aspect-ratio: 1/1) {\n    flex-direction: row;\n    bottom: 0;\n    width: 100%;\n    height: 20%;\n  }\n\n  @media (max-width: 400px) {\n    padding: 10px;\n  }\n`;\n\nconst Button = styled.button`\n  outline: none;\n  color: white;\n  opacity: 1;\n  background: transparent;\n  background-color: transparent;\n  background-position-x: 0%;\n  background-position-y: 0%;\n  background-repeat: repeat;\n  background-image: none;\n  padding: 0;\n  text-shadow: 0px 0px 4px black;\n  background-position: center center;\n  background-repeat: no-repeat;\n  pointer-events: auto;\n  cursor: pointer;\n  z-index: 2;\n  filter: invert(100%);\n  border: none;\n\n  &:hover {\n    opacity: 0.7;\n  }\n`;\n\nconst TakePhotoButton = styled(Button)`\n  background: url('https://img.icons8.com/ios/50/000000/compact-camera.png');\n  background-position: center;\n  background-size: 50px;\n  background-repeat: no-repeat;\n  width: 80px;\n  height: 80px;\n  border: solid 4px black;\n  border-radius: 50%;\n\n  &:hover {\n    background-color: rgba(0, 0, 0, 0.3);\n  }\n`;\n\nconst ChangeFacingCameraButton = styled(Button)`\n  background: url(https://img.icons8.com/ios/50/000000/switch-camera.png);\n  background-position: center;\n  background-size: 40px;\n  background-repeat: no-repeat;\n  width: 40px;\n  height: 40px;\n  padding: 40px;\n  &:disabled {\n    opacity: 0;\n    cursor: default;\n    padding: 60px;\n  }\n  @media (max-width: 400px) {\n    padding: 40px 5px;\n    &:disabled {\n      padding: 40px 25px;\n    }\n  }\n`;\n\nconst ImagePreview = styled.div<{ image: string | null }>`\n  width: 120px;\n  height: 120px;\n  ${({ image }) => (image ? `background-image:  url(${image});` : '')}\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n\n  @media (max-width: 400px) {\n    width: 50px;\n    height: 120px;\n  }\n`;\n\nconst FullScreenImagePreview = styled.div<{ image: string | null }>`\n  width: 100%;\n  height: 100%;\n  z-index: 100;\n  position: absolute;\n  background-color: black;\n  ${({ image }) => (image ? `background-image:  url(${image});` : '')}\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n`;\n\nconst App = () => {\n  const [numberOfCameras, setNumberOfCameras] = useState(0);\n  const [image, setImage] = useState<string | null>(null);\n  const [showImage, setShowImage] = useState<boolean>(false);\n  const camera = useRef<CameraType>(null);\n  const [devices, setDevices] = useState<MediaDeviceInfo[]>([]);\n  const [activeDeviceId, setActiveDeviceId] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    (async () => {\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const videoDevices = devices.filter(i => i.kind == 'videoinput');\n      setDevices(videoDevices);\n    })();\n  });\n\n  return (\n    <Wrapper>\n      {showImage ? (\n        <FullScreenImagePreview\n          image={image}\n          onClick={() => {\n            setShowImage(!showImage);\n          }}\n        />\n      ) : (\n        <Camera\n          ref={camera}\n          aspectRatio=\"cover\"\n          numberOfCamerasCallback={i => setNumberOfCameras(i)}\n          videoSourceDeviceId={activeDeviceId}\n          errorMessages={{\n            noCameraAccessible: 'No camera device accessible. Please connect your camera or try a different browser.',\n            permissionDenied: 'Permission denied. Please refresh and give camera permission.',\n            switchCamera:\n              'It is not possible to switch camera to different one because there is only one video device accessible.',\n            canvas: 'Canvas is not supported.',\n          }}\n        />\n      )}\n      <Control>\n        <select\n          onChange={event => {\n            setActiveDeviceId(event.target.value);\n          }}\n        >\n          {devices.map(d => (\n            <option key={d.deviceId} value={d.deviceId}>\n              {d.label}\n            </option>\n          ))}\n        </select>\n        <ImagePreview\n          image={image}\n          onClick={() => {\n            setShowImage(!showImage);\n          }}\n        />\n        <TakePhotoButton\n          onClick={() => {\n            if (camera.current) {\n              const photo = camera.current.takePhoto();\n              console.log(photo);\n              setImage(photo);\n            }\n          }}\n        />\n        <ChangeFacingCameraButton\n          disabled={numberOfCameras <= 1}\n          onClick={() => {\n            if (camera.current) {\n              const result = camera.current.switchCamera();\n              console.log(result);\n            }\n          }}\n        />\n      </Control>\n    </Wrapper>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}